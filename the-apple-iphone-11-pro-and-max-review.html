<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>The Apple A13 SoC: Lightning &amp;amp; Thunder | VibeJolt</title><meta name=generator content="Hugo 0.98.0"><meta name=description content="Apple’s A13 SoC is the newest iteration in the company’s silicon design efforts. The new silicon piece is manufactured on what Apple calls a “second generation 7nm manufacturing process”. The wording is a bit ambiguous, however, as it’s been repeatedly pointed out that this would mean TSMC’s N7P node, which is a performance tuned variant of last year’s N7 node, and not the N7+ node which is based on EUV production."><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cayman/css/normalize.css><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel=stylesheet type=text/css><link rel=stylesheet href=https://assets.cdnweb.info/hugo/cayman/css/cayman.css><link rel=apple-touch-icon sizes=180x180 href=./apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=./favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=./favicon-16x16.png><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css integrity=sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js integrity=sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js integrity=sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI crossorigin=anonymous onload=renderMathInElement(document.body)></script></head><body><section class=page-header><h1 class=project-name>VibeJolt</h1><h2 class=project-tagline></h2><nav><a href=./index.html class=btn>Blog</a>
<a href=./sitemap.xml class=btn>Sitemap</a>
<a href=./index.xml class=btn>RSS</a></nav></section><section class=main-content><h1>The Apple A13 SoC: Lightning &amp;amp; Thunder</h1><div><strong>Publish date: </strong>2024-06-11</div><p>Apple’s A13 SoC is the newest iteration in the company’s silicon design efforts. The new silicon piece is manufactured on what Apple calls a “second generation 7nm manufacturing process”. The wording is a bit ambiguous, however, as it’s been repeatedly pointed out that this would mean TSMC’s N7P node, which is a performance tuned variant of last year’s N7 node, and not the N7+ node which is based on EUV production.</p><p><strong>Update October 27th: </strong><a href=#>TechInsights has now officially released a die shot of the new Apple A13</a>, and we can confirm a few assumptions on our side.</p><p>The new die is 98.48mm² which is 18.3% larger <a href=#>than the A12 of last year</a>. Given that this year’s manufacturing node hasn’t seen any major changes in terms of process density, it’s natural for the die size to increase a bit as Apple adds more functionality to the SoC.</p><p align=center><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/14892/A13_575px.jpg style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a><br>AnandTech modified&nbsp;<a href=#>TechInsights Apple A13</a>&nbsp;Die Shot</p><table border=1 cellpadding=0 cellspacing=0><tbody readability=1.9697885196375><tr class=tgrey readability=2><td colspan=3>Die Block Comparison (mm²)</td></tr><tr class=tlblue><td class=contentwhite>SoC<p>Process Node</p></td><td class=contentwhite>Apple A13<p>TSMC N7P</p></td><td class=contentwhite>Apple A12<p>TSMC N7</p></td></tr><tr><td class=tlgrey><strong>Total Die</strong></td><td>98.48</td><td><a href=#>83.27</a></td></tr><tr><td class=tlgrey><strong>Big Core</strong></td><td>2.61</td><td>2.07</td></tr><tr><td class=tlgrey><strong>Small Core</strong></td><td>0.58</td><td>0.43</td></tr><tr><td class=tlgrey><strong>CPU Complex<br>(Cores & L2)</strong></td><td>13.47<br>(9.06 + 4.41)</td><td>11.16<br>(8.06 + 3.10)</td></tr><tr><td class=tlgrey><strong>GPU Total</strong></td><td>15.28</td><td>14.88</td></tr><tr><td class=tlgrey><strong>GPU Core</strong></td><td>3.25</td><td>3.23</td></tr><tr><td class=tlgrey><strong>NPU</strong></td><td>4.64</td><td>5.79</td></tr><tr readability=2><td class=tlgrey><span>SLC Slice<br>(SRAM+Tag Logic)</span></td><td>2.09</td><td>1.23</td></tr><tr><td class=tlgrey><span>SLC SRAM<br>(All 4 Slices)</span></td><td>6.36</td><td>3.20</td></tr></tbody></table><p>When breaking down the block sizes of the different IP on the SoC, we can see some notable changes: The big new Lightning cores have increased in size by ~26% compared to last year, a large increase as we expect the new cores to have new functional units. The small Thunder cores have also increase in size by a massive 34% compared to last year’s Tempest cores, pointing out to the large microarchitecture changes we'll discuss in a bit.</p><p>The L2 on the big cores looks relatively similar to that of the A12, pointing out to a maintained 8MB size. What’s interesting is that the L2 of the small cores has now seen significantly changes, and&nbsp;the two slices that this cluster now embeds look quite&nbsp;identical to the slices of the large core's L2. It’s thus very likely that we’re looking at an increased 4MB of total L2 for the small Thunder cores.</p><p>The GPU footprint has slightly increased&nbsp;by a more marginal 3.8% - the biggest change&nbsp;seems to have been a rearrangement of the ALU blocks and texture unit layout of the GPU back-end, as the front-end blocks of the new IP looks largely similar to that of the A12.</p><p>The NPU has seen a large reduction in size and is now 20% smaller than that of the A12. As the A12’s NPU was Apple’s first in-house IP it seems natural for the company to quickly iterate and optimise on the second-generation design. It’s still a notably large block coming in at 4.64mm².</p><p>By far the biggest change on the SoC level has been the new system level cache (SLC). Already last year Apple had made huge changes to this block as it had adopted a new microarchitecture and increased the size from 4MB to 8MB. This year, Apple is doubling down on the SLC and it’s very evidently using a new 16MB configuration across the four slices. A single SLC slice without the central arbitration block increases by 69% - and the actual SRAM macros seen on the die shot essentially double from a total of 3.20mm² to 6.36mm².</p><p>The amount of SRAM that Apple puts on the A13 is staggering, especially on the CPU side: We’re seeing 8MB on the big cores, 4MB on the small cores, and 16MB on the SLC which can serve all IP blocks on the chip.</p><h3>CPU Frequencies</h3><p>The CPU complex remains a 2+4 architecture, supporting two large performance cores and four smaller efficiency cores. In terms of the frequencies of the various cores, we can unveil the following behavior changes to the A13:</p><table border=1 cellpadding=0 cellspacing=1><tbody readability=1><tr class=tgrey readability=2><td colspan=7>Maximum Frequency vs Loaded Threads<br>Per-Core Maximum MHz</td></tr><tr class=tlblue><td class=contentwhite>Apple A12</td><td class=contentwhite>1</td><td class=contentwhite>2</td><td class=contentwhite>3</td><td class=contentwhite>4</td><td class=contentwhite>5</td><td class=contentwhite>6</td></tr><tr height=20><td class=tlgrey>Performance 1</td><td>2514</td><td>2380</td><td>2380</td><td>2380</td><td>2380</td><td>2380</td></tr><tr><td class=tlgrey>Performance 2</td><td>&nbsp;</td><td>2380</td><td>2380</td><td>2380</td><td>2380</td><td>2380</td></tr><tr><td class=tlgrey>Efficiency 1</td><td>&nbsp;</td><td>&nbsp;</td><td>1587</td><td>1562</td><td>1562</td><td>1538</td></tr><tr><td class=tlgrey>Efficiency 2</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>1562</td><td>1562</td><td>1538</td></tr><tr><td class=tlgrey>Efficiency 3</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>1562</td><td>1538</td></tr><tr><td class=tlgrey>Efficiency 4</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>1538</td></tr><tr class=tlblue><td class=contentwhite>Apple A13</td><td class=contentwhite>1</td><td class=contentwhite>2</td><td class=contentwhite>3</td><td class=contentwhite>4</td><td class=contentwhite>5</td><td class=contentwhite>6</td></tr><tr height=20><td class=tlgrey>Performance 1</td><td>2666</td><td>2590</td><td>2590</td><td>2590</td><td>2590</td><td>2590</td></tr><tr><td class=tlgrey>Performance 2</td><td>&nbsp;</td><td>2590</td><td>2590</td><td>2590</td><td>2590</td><td>2590</td></tr><tr><td class=tlgrey>Efficiency 1</td><td>&nbsp;</td><td>&nbsp;</td><td>1728</td><td>1728</td><td>1728</td><td>1728</td></tr><tr><td class=tlgrey>Efficiency 2</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>1728</td><td>1728</td><td>1728</td></tr><tr><td class=tlgrey>Efficiency 3</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>1728</td><td>1728</td></tr><tr><td class=tlgrey>Efficiency 4</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>1728</td></tr></tbody></table><p>The large performance cores this year see a roughly 6% increase in clockspeeds, bringing them up to around 2666MHz. Last year we estimated the A12 large cores to clock in at around 2500MHz, but the more exact figure as measured by performance counters seems to be 2514MHz. Similarly, the A13’s big core clock should be a few MHz above our estimated 2666MHz clock. Apple continues to quickly ramp down in frequency depending on how many large cores are active, and as such will max out at 2590MHz even on the lightest threads. I also noted that frequency will quickly ramp up and down depending on instruction mix and the load complexity on the core.</p><p>The small efficiency cores have seen a larger 8.8 – 12.3% clock boost, bringing them to up to ~1728MHz. This is a good boost, but what’s also important is that the small cores now don’t clock down when there’s more of them active.</p><h3>The Lightning Performance CPU Cores: Minor Upgrades, Mystery of AMX</h3><p>The large cores for this generation are called “Lightning” and are direct successors to last year’s Vortex microarchitecture. In terms of the core design, at least in regards to the usual execution units, we don’t see too much divergence from last year’s core. The microarchitecture at its heart is still a 7-wide decode front-end, paired with a very wide execution back-end that features 6 ALUs and three FP/vector pipelines.</p><p>Apple hasn’t made any substantial changes to the execution back-end, as both Lightning and Vortex are largely similar to each other. The notable exception to this is the complex integer pipelines, where we do see improvements. Here the two multiplier units are able to shave off one cycle of latency, dropping from 4 cycles to 3. Integer division has also seen a large upgrade as the throughput has now been doubled and latency/minimum number of cycles has been reduced from 8 to 7 cycles.</p><p>Another change in the integer units has been a 50% increase in the number of ALU units which can set condition flags; now 3 of the ALUs can do this, which is up from 2 in A12's Vortex.</p><p>As for the floating point and vector/SIMD pipelines, we haven't noticed any changes there.</p><p>In terms of caches, Apple seems to have kept the cache structures as they were in the Vortex cores of the A12. This means we have 8-way associative 128KB L1 instruction and data caches. The data cache remains very fast with a 3-cycle load-to-use latency. The shared L2 cache between the cores continues to be 8MB in size, however Apple has reduced the latency from 16 to 14 cycles, something we’ll be looking at in more detail on the next page when looking at the memory subsystem changes.</p><p>A big change to the CPU cores which we don’t have very much information on is Apple’s integration of “machine learning accelerators” into the microarchitecture. At heart these seem to be matrix-multiply units with DSP-like instructions, and Apple puts their performance at up to 1 Tera Operations (TOPs) of throughput, claiming an up-to 6x increase over the regular vector pipelines. This AMX instruction set is seemingly a superset of the ARM ISA that is running on the CPU cores.</p><p>There’s been a lot of confusion as to what this means, as until now it hadn’t been widely known that Arm architecture licensees were allowed to extend their ISA with custom instructions. We weren’t able to get any confirmation from either Apple or Arm on the matter, but one thing that is clear is that Apple isn’t publicly exposing these new instructions to developers, and they’re not included in Apple’s public compilers. We do know, however, that Apple internally does have compilers available for it, and libraries such as the Acclerate.framework seem to be able to take advantage of AMX. Unfortunately, I haven't had the time or experience to investigate this further for this article.</p><p>Arm’s recent reveal of making custom instructions available for vendors to implement and integrate into Arm’s cores certainly seems evidence enough that architecture licensees would be free to do what they’d like – Apple’s choice of hiding away AMX instructions at least resolves the concern about possible ISA fragmentation on the software side.</p><p align=center><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/14892/a13-pcb_575px.jpg style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a><br>Apple's iPhone 11 Pro Max Motherboard with the A13 SoC (Image Courtesy <a href=#>iFixit</a>)</p><h3>The Thunder Efficiency CPU Cores: Major Upgrades</h3><p>Apple’s small efficiency cores are extremely interesting because they’re not all that small when compared to the typical little cores from Arm, such as the Cortex-A55. Last year’s Tempest efficiency cores in the A12 were based on a 3-wide out-of-order microarchitecture with two main execution pipelines, working alongside L/S units and what we assume is a dedicated division unit.</p><p>This year’s Thunder microarchitecture seems to have made major changes to the efficiency CPU core, as we’re seeing substantial upgrades in the execution capabilities of the new cores. In terms of the integer ALUs we’re seemingly still looking at two units here, however Apple has doubled the number of units capable of flag set operations from 1 to 2. MUL throughput remains at 1 instruction per cycle, while the division unit is also seemingly unchanged.</p><p>What’s actually more impressive is that the floating point and vector pipelines were essentially doubled: FP addition throughput has gone from 1 to 2, while the latency has been reduced from 4 to 3. This is mirrored by vector addition capabilities, with a TP of 2 and a latency of 2. This doubling of throughput is extended throughout almost all instructions executed in the FP/SIMD pipelines, with the exceptions being some operations such as multiplications and division.</p><p>The FP division unit has seen a massive overhaul, as it’s seemingly now a totally new unit that’s now optimized for 64-bit operations, no longer halving its throughput when operating on double-precision numbers. DP latencies have been reduced from 19 to 10 cycles, while SP latency has gone down from 12 to 9 cycles. Vector DP division operations have even seen silly improvements such as 4x increase in throughput and 1/3rd the latency.</p><p>The Thunder cores are now served by a 48KB L1 data cache, which is an increase over the 32KB we’ve seen in previous generations of Apple’s efficiency cores. We haven’t been able to confirm the L1 instruction cache. There also seems to have been changes to the L2 cache of the efficiency cores, which we'll discuss on the following page.</p><p align=center><a href=#><img alt src=https://cdn.statically.io/img/images.anandtech.com/doci/14892/spec2006-a13efficiency_575px.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto></a></p><p>Looking at the performance of the new A13 Thunder cores, we’re seeing that the new microarchitecture has increased its IPC significantly, with gains ranging from 19% in 403.gcc to 38% in 400.perlbench in SPECint, while floating point performance has also improved by an equally impressive 34-38% in non-memory bound SPECfp workloads.</p><p>In other areas we're seeing some performance regressions, and this is because Apple has changed the DVFS policies of the memory subsystem, leading to the efficiency cores being unable to trigger some of the memory controller's higher frequency performance states. This results in some of the odd results we are seeing, such as 470.lbm.</p><p>This causes a bit of an issue for our dedicated measurements of the cores in isolation: given a more realistic workload such as a 3D game where the GPU would have the memory run at faster speed, the performance of the Thunder cores should be higher than what we see showcased here. I’ll attempt to measure the peak performance of the cores when they’re not limited by memory in a future update as I think it should be very interesting.</p><p>The power efficiency of the new cores is also significantly better. Granted, some of these improvements will be due to the system memory not running as fast, but given that the cores still deliver 10-23% higher average performance in the SPEC suites, it’s still massively impressive that energy consumption has gone down by 25% on average as well – pointing to major efficiency gains.</p><p>In the face of the relatively conservative changes of the Lightning cores (other than AMX), the new Thunder cores seem like an outright massive change for the A13 and a major divergence from Apple’s past efficiency core microarchitectures. In the face-off against a Cortex-A55 implementation such as on the Snapdragon 855, the new Thunder cores represent a 2.5-3x performance lead while at the same time using less than half the energy.</p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7orrAp5utnZOde6S7zGiqoaenZH51hJhrZq2glWKusbzLnmSiqJiku6Z5kGpkqaqfYq6vsIymmLFloprDqrHWaGk%3D</p><footer class=site-footer><span class=site-footer-credits>Made with <a href=https://gohugo.io/>Hugo</a>. © 2022. All rights reserved.</span></footer></section><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/banner.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>